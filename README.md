# KRX íˆíŠ¸ë§µ

ëŒ€í•œë¯¼êµ­ ì¦ì‹œ íˆíŠ¸ë§µ ì‹œê°í™” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. í…Œë§ˆë³„ ì¢…ëª© ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸í„°ë™í‹°ë¸Œí•œ íˆíŠ¸ë§µì„ ìƒì„±í•©ë‹ˆë‹¤.

## ê¸°ëŠ¥

- ğŸ“Š **í…Œë§ˆ ê¸°ë°˜ íˆíŠ¸ë§µ**: í…Œë§ˆë³„ë¡œ ê·¸ë£¹í™”ëœ ì¢…ëª© ì‹œê°í™”
- ğŸ¨ **ë“±ë½ë¥  ìƒ‰ìƒ í‘œì‹œ**: ìƒìŠ¹(ë¹¨ê°•), í•˜ë½(íŒŒë‘), ë³´í•©(íšŒìƒ‰)
- ğŸ” **ê³„ì¸µì  êµ¬ì¡°**: ìƒìœ„ ê·¸ë£¹ â†’ í…Œë§ˆ â†’ ê°œë³„ ì¢…ëª©
- ğŸ“ˆ **ì‹œê°€ì´ì•¡ ê¸°ë°˜ í¬ê¸°**: ì‹œê°€ì´ì•¡ì— ë¹„ë¡€í•œ íƒ€ì¼ í¬ê¸°

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
krx-heatmap/
â”œâ”€â”€ theme_heatmap.py          # í…Œë§ˆ íˆíŠ¸ë§µ ë©”ì¸ ì‹¤í–‰ íŒŒì¼
â”œâ”€â”€ run_heatmap.bat           # íˆíŠ¸ë§µ ì‹¤í–‰ ë°°ì¹˜ íŒŒì¼
â”œâ”€â”€ extract_heatmap_data.py   # HTMLì—ì„œ íˆíŠ¸ë§µ ë°ì´í„° ì¶”ì¶œ
â”œâ”€â”€ extract_theme_stocks.py   # í…Œë§ˆ ì¢…ëª© ì¶”ì¶œ
â”œâ”€â”€ clean_theme_data.py       # í…Œë§ˆ ë°ì´í„° ì •ë¦¬
â”œâ”€â”€ update_duplicates_sheet.py # ì¤‘ë³µ ì‹œíŠ¸ ì—…ë°ì´íŠ¸
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â””â”€â”€ heatmap_service.py    # íˆíŠ¸ë§µ ë°ì´í„° ì²˜ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ models.py             # ë°ì´í„° ëª¨ë¸ (Stock, ThemeGroup)
â”‚   â”‚   â””â”€â”€ theme_config.py       # í…Œë§ˆ ê³„ì¸µ êµ¬ì¡° ë° ì„¤ì •
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”œâ”€â”€ krx_repository.py     # KRX ë°ì´í„° ë¡œë“œ
â”‚   â”‚   â””â”€â”€ file_repository.py    # í…Œë§ˆ íŒŒì¼ ë¡œë“œ
â”‚   â”œâ”€â”€ presentation/
â”‚   â”‚   â””â”€â”€ visualizer.py         # íˆíŠ¸ë§µ ì‹œê°í™”
â”‚   â””â”€â”€ simple_heatmap.py         # ê°„ë‹¨í•œ íˆíŠ¸ë§µ (FDRë§Œ ì‚¬ìš©)
â””â”€â”€ data/
    â”œâ”€â”€ theme_html/               # í…Œë§ˆ HTML íŒŒì¼
    â””â”€â”€ theme_data/               # í…Œë§ˆ ë°ì´í„° ì—‘ì…€ íŒŒì¼

```

## ì‚¬ìš© ë°©ë²•

### 1. ê°„ë‹¨í•œ íˆíŠ¸ë§µ (ì‹œê°€ì´ì•¡ ìƒìœ„ 100ê°œ ì¢…ëª©)

```bash
uv run src/simple_heatmap.py
```

FinanceDataReaderë¥¼ ì‚¬ìš©í•˜ì—¬ KRX ì‹œê°€ì´ì•¡ ìƒìœ„ 100ê°œ ì¢…ëª©ì˜ íˆíŠ¸ë§µì„ ìƒì„±í•©ë‹ˆë‹¤.

### 2. í…Œë§ˆ ê¸°ë°˜ íˆíŠ¸ë§µ

```bash
uv run theme_heatmap.py
# ë˜ëŠ”
run_heatmap.bat
```

í…Œë§ˆë³„ ì¢…ëª© ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì¸µì  íˆíŠ¸ë§µì„ ìƒì„±í•©ë‹ˆë‹¤.

### 3. ë°ì´í„° ì¶”ì¶œ ë° ì „ì²˜ë¦¬

```bash
# HTMLì—ì„œ íˆíŠ¸ë§µ ë°ì´í„° ì¶”ì¶œ
uv run extract_heatmap_data.py

# í…Œë§ˆ ì¢…ëª© ì¶”ì¶œ
uv run extract_theme_stocks.py

# í…Œë§ˆ ë°ì´í„° ì •ë¦¬
uv run clean_theme_data.py
```

## ì„¤ì •

### í…Œë§ˆ ê³„ì¸µ êµ¬ì¡° (`src/domain/theme_config.py`)

```python
# í…Œë§ˆ ê³„ì¸µ êµ¬ì¡° ì •ì˜
THEME_HIERARCHY = {
    "ë¦¬íŠ¬": "2ì°¨ì „ì§€",           # ë¦¬íŠ¬ í…Œë§ˆëŠ” 2ì°¨ì „ì§€ ê·¸ë£¹ì— ì†í•¨
    "2ì°¨ì „ì§€(ì¢…í•©)": "2ì°¨ì „ì§€"
}

# ìš°ì„ ìˆœìœ„ í…Œë§ˆ (ë¨¼ì € ì²˜ë¦¬)
PRIORITY_THEMES = ["ë¦¬íŠ¬"]

# í…Œë§ˆëª… ë³€ê²½
THEME_RENAME = {
    "2ì°¨ì „ì§€": "2ì°¨ì „ì§€(ì¢…í•©)"
}
```

## ì¶œë ¥

- `heatmap.html` - ê°„ë‹¨í•œ íˆíŠ¸ë§µ ê²°ê³¼
- `theme_heatmap.html` - í…Œë§ˆ ê¸°ë°˜ íˆíŠ¸ë§µ ê²°ê³¼
- `heatmap_data.xlsx` - ì¶”ì¶œëœ íˆíŠ¸ë§µ ë°ì´í„°
- `theme_stocks.xlsx` - í…Œë§ˆë³„ ì¢…ëª© ë°ì´í„°

## ìš”êµ¬ì‚¬í•­

- Python >= 3.14
- finance-datareader
- pandas
- plotly
- openpyxl
- beautifulsoup4 (ë°ì´í„° ì¶”ì¶œìš©)

## ë¼ì´ì„¼ìŠ¤

MIT
